
services:
  pdf-merger:
    build:
      context: .
      dockerfile: Dockerfile
    image: pdf-merger:latest
    ports:
    - "8080:8080"
    environment:
      SPRING_PROFILES_ACTIVE: cloud
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8080/actuator/health || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
  vince-analytics:
    image: ghcr.io/vinceanalytics/vince
    ports:
    - "8085:8080"
    volumes:
    - "./vince-data:/vince-data"
    command:
      [
        "serve",
        "--adminName", "${VINCE_ADMIN_NAME}",
        "--adminPassword", "${VINCE_ADMIN_PASSWORD}",
        "--domains", "${VINCE_DOMAINS}",
        "--profile"
      ]

volumes:
  vince-data:
